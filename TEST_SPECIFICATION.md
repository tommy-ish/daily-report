# テスト仕様書

## 1. テスト方針

### 1.1 テスト目的

- システムが要件定義通りに動作することを保証
- バグの早期発見と品質向上
- セキュリティ脆弱性の検出と対策
- ユーザー体験の検証

### 1.2 テスト対象

- フロントエンド（Web UI）
- バックエンド（API）
- データベース（整合性・パフォーマンス）
- セキュリティ
- ブラウザ互換性

### 1.3 テストレベル

| テストレベル   | 実施者   | タイミング   | カバレッジ目標 |
| -------------- | -------- | ------------ | -------------- |
| 単体テスト     | 開発者   | 開発中       | 80%以上        |
| 結合テスト     | 開発者   | 機能完成時   | 主要パス100%   |
| システムテスト | QA担当   | リリース前   | 全機能         |
| 受け入れテスト | ユーザー | リリース前   | 主要機能       |
| 回帰テスト     | 自動化   | 各リリース前 | 全機能         |

### 1.4 テストツール

- 単体テスト: Jest, Vitest
- E2Eテスト: Playwright, Cypress
- APIテスト: Postman, Jest
- パフォーマンステスト: k6, Apache JMeter
- セキュリティテスト: OWASP ZAP
- CI/CD: GitHub Actions

---

## 2. テスト環境

### 2.1 環境構成

| 環境             | 用途                 | URL                                      |
| ---------------- | -------------------- | ---------------------------------------- |
| 開発環境         | 開発・単体テスト     | http://localhost:3000                    |
| テスト環境       | 結合・システムテスト | https://test.daily-report.example.com    |
| ステージング環境 | 受け入れテスト       | https://staging.daily-report.example.com |
| 本番環境         | リリース後           | https://daily-report.example.com         |

### 2.2 テストデータ

**ユーザーマスタ**:

```
管理者:
  ID: 1, 氏名: 管理太郎, Email: admin@test.com, Password: Test1234!

上長:
  ID: 2, 氏名: 上長一郎, Email: manager1@test.com, Password: Test1234!
  ID: 3, 氏名: 上長二郎, Email: manager2@test.com, Password: Test1234!

営業担当者:
  ID: 10, 氏名: 営業太郎, Email: sales1@test.com, Password: Test1234!, 上長ID: 2
  ID: 11, 氏名: 営業花子, Email: sales2@test.com, Password: Test1234!, 上長ID: 2
  ID: 12, 氏名: 営業次郎, Email: sales3@test.com, Password: Test1234!, 上長ID: 3
```

**顧客マスタ**:

```
顧客1: ID: 100, 氏名: 山田太郎, 会社: 株式会社ABC, 部署: 営業部
顧客2: ID: 101, 氏名: 佐藤花子, 会社: 株式会社XYZ, 部署: 総務部
顧客3: ID: 102, 氏名: 鈴木次郎, 会社: 株式会社DEF, 部署: 開発部
```

---

## 3. 機能テストケース

### 3.1 認証機能

#### TC-AUTH-001: ログイン成功

**前提条件**: ユーザーが登録済み

| 項目       | 内容                                                                                                  |
| ---------- | ----------------------------------------------------------------------------------------------------- |
| テスト手順 | 1. ログイン画面にアクセス<br>2. 有効なメールアドレスとパスワードを入力<br>3. ログインボタンをクリック |
| 期待結果   | ダッシュボードに遷移し、ユーザー名が表示される                                                        |
| 優先度     | 高                                                                                                    |

#### TC-AUTH-002: ログイン失敗（不正なパスワード）

**前提条件**: ユーザーが登録済み

| 項目       | 内容                                                                                                        |
| ---------- | ----------------------------------------------------------------------------------------------------------- |
| テスト手順 | 1. ログイン画面にアクセス<br>2. 有効なメールアドレスと不正なパスワードを入力<br>3. ログインボタンをクリック |
| 期待結果   | エラーメッセージ「メールアドレスまたはパスワードが正しくありません」が表示される                            |
| 優先度     | 高                                                                                                          |

#### TC-AUTH-003: ログイン失敗（存在しないユーザー）

**前提条件**: なし

| 項目       | 内容                                                                                                      |
| ---------- | --------------------------------------------------------------------------------------------------------- |
| テスト手順 | 1. ログイン画面にアクセス<br>2. 存在しないメールアドレスとパスワードを入力<br>3. ログインボタンをクリック |
| 期待結果   | エラーメッセージ「メールアドレスまたはパスワードが正しくありません」が表示される                          |
| 優先度     | 高                                                                                                        |

#### TC-AUTH-004: ログアウト

**前提条件**: ログイン済み

| 項目       | 内容                                                         |
| ---------- | ------------------------------------------------------------ |
| テスト手順 | 1. ダッシュボードにアクセス<br>2. ログアウトボタンをクリック |
| 期待結果   | ログイン画面にリダイレクトされる                             |
| 優先度     | 高                                                           |

#### TC-AUTH-005: セッション期限切れ

**前提条件**: ログイン後30分経過

| 項目       | 内容                                                                               |
| ---------- | ---------------------------------------------------------------------------------- |
| テスト手順 | 1. ログインして30分放置<br>2. 任意のページにアクセス                               |
| 期待結果   | ログイン画面にリダイレクトされ、「セッションが期限切れです」メッセージが表示される |
| 優先度     | 中                                                                                 |

---

### 3.2 日報機能（営業担当者）

#### TC-REPORT-001: 日報新規作成

**前提条件**: 営業担当者でログイン済み

| 項目       | 内容                                                                                                                                                         |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| テスト手順 | 1. 日報一覧画面で「新規作成」ボタンをクリック<br>2. Problem、Planを入力<br>3. 訪問記録を1件追加（顧客選択、時刻、内容、結果入力）<br>4. 保存ボタンをクリック |
| 期待結果   | 日報が作成され、一覧画面に表示される                                                                                                                         |
| 優先度     | 高                                                                                                                                                           |

#### TC-REPORT-002: 日報編集

**前提条件**: 営業担当者でログイン済み、日報が1件存在

| 項目       | 内容                                                                               |
| ---------- | ---------------------------------------------------------------------------------- |
| テスト手順 | 1. 日報一覧から編集ボタンをクリック<br>2. Problemを修正<br>3. 保存ボタンをクリック |
| 期待結果   | 日報が更新され、変更内容が反映される                                               |
| 優先度     | 高                                                                                 |

#### TC-REPORT-003: 訪問記録追加

**前提条件**: 営業担当者でログイン済み、日報作成画面を表示

| 項目       | 内容                                                                                                                                                  |
| ---------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| テスト手順 | 1. 訪問記録追加ボタンをクリック<br>2. 顧客、時刻、内容、結果を入力<br>3. さらに訪問記録追加ボタンをクリックして2件目を追加<br>4. 保存ボタンをクリック |
| 期待結果   | 2件の訪問記録が保存される                                                                                                                             |
| 優先度     | 高                                                                                                                                                    |

#### TC-REPORT-004: 訪問記録削除

**前提条件**: 営業担当者でログイン済み、訪問記録が2件ある日報を編集中

| 項目       | 内容                                                                |
| ---------- | ------------------------------------------------------------------- |
| テスト手順 | 1. 1件目の訪問記録の削除ボタンをクリック<br>2. 保存ボタンをクリック |
| 期待結果   | 1件目の訪問記録が削除され、2件目のみ残る                            |
| 優先度     | 中                                                                  |

#### TC-REPORT-005: 日報一覧表示

**前提条件**: 営業担当者でログイン済み、日報が10件存在

| 項目       | 内容                                 |
| ---------- | ------------------------------------ |
| テスト手順 | 1. 日報一覧画面にアクセス            |
| 期待結果   | 自分の日報10件が新しい順に表示される |
| 優先度     | 高                                   |

#### TC-REPORT-006: 日報期間絞り込み

**前提条件**: 営業担当者でログイン済み、複数月の日報が存在

| 項目       | 内容                            |
| ---------- | ------------------------------- |
| テスト手順 | 1. 日報一覧画面で「今週」を選択 |
| 期待結果   | 今週の日報のみが表示される      |
| 優先度     | 中                              |

#### TC-REPORT-007: 日報詳細表示

**前提条件**: 営業担当者でログイン済み、コメント付き日報が1件存在

| 項目       | 内容                                                          |
| ---------- | ------------------------------------------------------------- |
| テスト手順 | 1. 日報一覧から詳細ボタンをクリック                           |
| 期待結果   | 日報の全情報（訪問記録、Problem、Plan、コメント）が表示される |
| 優先度     | 高                                                            |

#### TC-REPORT-008: 同日の日報重複作成防止

**前提条件**: 営業担当者でログイン済み、当日の日報が既に存在

| 項目       | 内容                                               |
| ---------- | -------------------------------------------------- |
| テスト手順 | 1. 日報一覧画面にアクセス                          |
| 期待結果   | 新規作成ボタンが表示されない（または無効化される） |
| 優先度     | 高                                                 |

#### TC-REPORT-009: 日報削除

**前提条件**: 営業担当者でログイン済み、日報が1件存在

| 項目       | 内容                                                                     |
| ---------- | ------------------------------------------------------------------------ |
| テスト手順 | 1. 日報詳細画面で削除ボタンをクリック<br>2. 確認ダイアログでOKをクリック |
| 期待結果   | 日報が削除され、一覧画面にリダイレクトされる                             |
| 優先度     | 中                                                                       |

---

### 3.3 日報閲覧・コメント機能（上長）

#### TC-MANAGER-001: 部下の日報一覧表示

**前提条件**: 上長でログイン済み、部下の日報が10件存在

| 項目       | 内容                                 |
| ---------- | ------------------------------------ |
| テスト手順 | 1. 部下の日報一覧画面にアクセス      |
| 期待結果   | 部下全員の日報が新しい順に表示される |
| 優先度     | 高                                   |

#### TC-MANAGER-002: 部下別絞り込み

**前提条件**: 上長でログイン済み、複数の部下の日報が存在

| 項目       | 内容                                                          |
| ---------- | ------------------------------------------------------------- |
| テスト手順 | 1. 部下の日報一覧で部下選択ドロップダウンから特定の部下を選択 |
| 期待結果   | 選択した部下の日報のみが表示される                            |
| 優先度     | 中                                                            |

#### TC-MANAGER-003: 部下の日報詳細表示

**前提条件**: 上長でログイン済み、部下の日報が1件存在

| 項目       | 内容                                                              |
| ---------- | ----------------------------------------------------------------- |
| テスト手順 | 1. 部下の日報一覧から詳細ボタンをクリック                         |
| 期待結果   | 日報の全情報（営業担当者名、訪問記録、Problem、Plan）が表示される |
| 優先度     | 高                                                                |

#### TC-MANAGER-004: コメント投稿

**前提条件**: 上長でログイン済み、部下の日報詳細画面を表示

| 項目       | 内容                                                         |
| ---------- | ------------------------------------------------------------ |
| テスト手順 | 1. コメント入力欄にテキストを入力<br>2. 投稿ボタンをクリック |
| 期待結果   | コメントが投稿され、一覧に表示される                         |
| 優先度     | 高                                                           |

#### TC-MANAGER-005: コメント編集

**前提条件**: 上長でログイン済み、自分が投稿したコメントが存在

| 項目       | 内容                                                                                    |
| ---------- | --------------------------------------------------------------------------------------- |
| テスト手順 | 1. 自分のコメントの編集ボタンをクリック<br>2. テキストを修正<br>3. 保存ボタンをクリック |
| 期待結果   | コメントが更新され、変更内容が反映される                                                |
| 優先度     | 中                                                                                      |

#### TC-MANAGER-006: コメント削除

**前提条件**: 上長でログイン済み、自分が投稿したコメントが存在

| 項目       | 内容                                                                       |
| ---------- | -------------------------------------------------------------------------- |
| テスト手順 | 1. 自分のコメントの削除ボタンをクリック<br>2. 確認ダイアログでOKをクリック |
| 期待結果   | コメントが削除される                                                       |
| 優先度     | 中                                                                         |

#### TC-MANAGER-007: 他人のコメント編集不可

**前提条件**: 上長でログイン済み、他の上長が投稿したコメントが存在

| 項目       | 内容                                           |
| ---------- | ---------------------------------------------- |
| テスト手順 | 1. 日報詳細画面を表示                          |
| 期待結果   | 他人のコメントに編集・削除ボタンが表示されない |
| 優先度     | 高                                             |

#### TC-MANAGER-008: 統計情報表示

**前提条件**: 上長でログイン済み、部下の日報・訪問記録が複数存在

| 項目       | 内容                                                       |
| ---------- | ---------------------------------------------------------- |
| テスト手順 | 1. ダッシュボードにアクセス                                |
| 期待結果   | 部下の活動サマリー（訪問件数、日報提出状況等）が表示される |
| 優先度     | 中                                                         |

---

### 3.4 顧客マスタ機能

#### TC-CUSTOMER-001: 顧客新規登録

**前提条件**: ログイン済み

| 項目       | 内容                                                                                                                  |
| ---------- | --------------------------------------------------------------------------------------------------------------------- |
| テスト手順 | 1. 顧客マスタ一覧で新規登録ボタンをクリック<br>2. 必須項目（氏名、会社名）と任意項目を入力<br>3. 保存ボタンをクリック |
| 期待結果   | 顧客が登録され、一覧画面に表示される                                                                                  |
| 優先度     | 高                                                                                                                    |

#### TC-CUSTOMER-002: 顧客編集

**前提条件**: ログイン済み、顧客が1件存在

| 項目       | 内容                                                                                    |
| ---------- | --------------------------------------------------------------------------------------- |
| テスト手順 | 1. 顧客マスタ一覧から編集ボタンをクリック<br>2. 会社名を修正<br>3. 保存ボタンをクリック |
| 期待結果   | 顧客情報が更新される                                                                    |
| 優先度     | 高                                                                                      |

#### TC-CUSTOMER-003: 顧客削除

**前提条件**: ログイン済み、訪問記録のない顧客が1件存在

| 項目       | 内容                                                                         |
| ---------- | ---------------------------------------------------------------------------- |
| テスト手順 | 1. 顧客マスタ一覧から削除ボタンをクリック<br>2. 確認ダイアログでOKをクリック |
| 期待結果   | 顧客が削除される                                                             |
| 優先度     | 中                                                                           |

#### TC-CUSTOMER-004: 訪問記録ありの顧客削除不可

**前提条件**: ログイン済み、訪問記録のある顧客が1件存在

| 項目       | 内容                                                                         |
| ---------- | ---------------------------------------------------------------------------- |
| テスト手順 | 1. 顧客マスタ一覧から削除ボタンをクリック<br>2. 確認ダイアログでOKをクリック |
| 期待結果   | エラーメッセージ「訪問記録が存在するため削除できません」が表示される         |
| 優先度     | 高                                                                           |

#### TC-CUSTOMER-005: 顧客検索

**前提条件**: ログイン済み、複数の顧客が存在

| 項目       | 内容                                                                |
| ---------- | ------------------------------------------------------------------- |
| テスト手順 | 1. 顧客マスタ一覧の検索欄に「ABC」と入力<br>2. 検索ボタンをクリック |
| 期待結果   | 会社名に「ABC」を含む顧客のみが表示される                           |
| 優先度     | 中                                                                  |

#### TC-CUSTOMER-006: 必須項目未入力エラー

**前提条件**: ログイン済み

| 項目       | 内容                                                                             |
| ---------- | -------------------------------------------------------------------------------- |
| テスト手順 | 1. 顧客マスタ新規登録画面で氏名のみ入力（会社名は空）<br>2. 保存ボタンをクリック |
| 期待結果   | エラーメッセージ「会社名は必須です」が表示される                                 |
| 優先度     | 高                                                                               |

---

### 3.5 ユーザーマスタ機能（管理者）

#### TC-USER-001: ユーザー新規登録

**前提条件**: 管理者でログイン済み

| 項目       | 内容                                                                                                                                        |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| テスト手順 | 1. ユーザーマスタ一覧で新規登録ボタンをクリック<br>2. 氏名、メールアドレス、パスワード、役割（営業）、上長を入力<br>3. 保存ボタンをクリック |
| 期待結果   | ユーザーが登録され、一覧画面に表示される                                                                                                    |
| 優先度     | 高                                                                                                                                          |

#### TC-USER-002: ユーザー編集

**前提条件**: 管理者でログイン済み、ユーザーが1件存在

| 項目       | 内容                                                                                      |
| ---------- | ----------------------------------------------------------------------------------------- |
| テスト手順 | 1. ユーザーマスタ一覧から編集ボタンをクリック<br>2. 氏名を修正<br>3. 保存ボタンをクリック |
| 期待結果   | ユーザー情報が更新される                                                                  |
| 優先度     | 高                                                                                        |

#### TC-USER-003: メールアドレス重複エラー

**前提条件**: 管理者でログイン済み、メールアドレス「test@example.com」のユーザーが存在

| 項目       | 内容                                                                                   |
| ---------- | -------------------------------------------------------------------------------------- |
| テスト手順 | 1. ユーザーマスタ新規登録画面で重複するメールアドレスを入力<br>2. 保存ボタンをクリック |
| 期待結果   | エラーメッセージ「このメールアドレスは既に使用されています」が表示される               |
| 優先度     | 高                                                                                     |

#### TC-USER-004: パスワードポリシー違反

**前提条件**: 管理者でログイン済み

| 項目       | 内容                                                                                             |
| ---------- | ------------------------------------------------------------------------------------------------ |
| テスト手順 | 1. ユーザーマスタ新規登録画面でパスワードに「123」（8文字未満）を入力<br>2. 保存ボタンをクリック |
| 期待結果   | エラーメッセージ「パスワードは8文字以上必要です」が表示される                                    |
| 優先度     | 高                                                                                               |

#### TC-USER-005: 営業の上長未設定エラー

**前提条件**: 管理者でログイン済み

| 項目       | 内容                                                                                       |
| ---------- | ------------------------------------------------------------------------------------------ |
| テスト手順 | 1. ユーザーマスタ新規登録画面で役割「営業」を選択<br>2. 上長を選択せず保存ボタンをクリック |
| 期待結果   | エラーメッセージ「営業担当者には上長が必要です」が表示される                               |
| 優先度     | 高                                                                                         |

---

## 4. APIテストケース

### 4.1 認証API

#### TC-API-AUTH-001: POST /auth/login（成功）

```json
リクエスト:
{
  "email": "sales1@test.com",
  "password": "Test1234!"
}

期待レスポンス: 200 OK
{
  "success": true,
  "data": {
    "user": {
      "id": 10,
      "name": "営業太郎",
      "email": "sales1@test.com",
      "role": "sales"
    }
  }
}
```

#### TC-API-AUTH-002: POST /auth/login（失敗 - 不正なパスワード）

```json
リクエスト:
{
  "email": "sales1@test.com",
  "password": "wrongpassword"
}

期待レスポンス: 401 Unauthorized
{
  "success": false,
  "error": {
    "code": "INVALID_CREDENTIALS",
    "message": "メールアドレスまたはパスワードが正しくありません"
  }
}
```

### 4.2 日報API

#### TC-API-REPORT-001: GET /daily-reports（一覧取得）

```
リクエスト: GET /daily-reports?page=1&limit=20
認証: 営業担当者

期待レスポンス: 200 OK
{
  "success": true,
  "data": {
    "items": [...],
    "pagination": {
      "currentPage": 1,
      "totalPages": 5,
      "totalItems": 100
    }
  }
}
```

#### TC-API-REPORT-002: POST /daily-reports（作成成功）

```json
リクエスト:
{
  "reportDate": "2025-12-30",
  "problem": "新規顧客開拓が課題",
  "plan": "既存顧客から紹介をもらう",
  "visits": [
    {
      "customerId": 100,
      "visitTime": "10:00:00",
      "content": "新製品提案",
      "outcome": "好感触"
    }
  ]
}

期待レスポンス: 201 Created
{
  "success": true,
  "data": {
    "id": 1,
    "userId": 10,
    "reportDate": "2025-12-30",
    ...
  }
}
```

#### TC-API-REPORT-003: POST /daily-reports（重複エラー）

```json
前提条件: 2025-12-30の日報が既に存在

リクエスト:
{
  "reportDate": "2025-12-30",
  "problem": "課題",
  "plan": "計画"
}

期待レスポンス: 409 Conflict
{
  "success": false,
  "error": {
    "code": "DUPLICATE",
    "message": "この日付の日報は既に存在します"
  }
}
```

#### TC-API-REPORT-004: GET /daily-reports/:id（他人の日報アクセス拒否）

```
リクエスト: GET /daily-reports/999
認証: 営業担当者A
前提条件: ID 999の日報は営業担当者Bが所有

期待レスポンス: 403 Forbidden
{
  "success": false,
  "error": {
    "code": "FORBIDDEN",
    "message": "アクセス権限がありません"
  }
}
```

### 4.3 コメントAPI

#### TC-API-COMMENT-001: POST /daily-reports/:reportId/comments（成功）

```json
リクエスト:
{
  "content": "良い結果ですね。引き続き頑張ってください。"
}

認証: 上長
期待レスポンス: 201 Created
{
  "success": true,
  "data": {
    "id": 1,
    "dailyReportId": 1,
    "userId": 2,
    "userName": "上長一郎",
    "content": "良い結果ですね。引き続き頑張ってください。",
    "createdAt": "2025-12-30T20:00:00Z"
  }
}
```

#### TC-API-COMMENT-002: POST /daily-reports/:reportId/comments（営業は投稿不可）

```json
リクエスト:
{
  "content": "コメントです"
}

認証: 営業担当者
期待レスポンス: 403 Forbidden
{
  "success": false,
  "error": {
    "code": "FORBIDDEN",
    "message": "コメント投稿は上長のみ可能です"
  }
}
```

---

## 5. セキュリティテスト

### 5.1 認証・認可

#### TC-SEC-001: 未認証アクセス拒否

**テスト内容**: 未ログイン状態で保護されたページにアクセス

| エンドポイント | 期待結果         |
| -------------- | ---------------- |
| /daily-reports | 401 Unauthorized |
| /customers     | 401 Unauthorized |
| /users         | 401 Unauthorized |

#### TC-SEC-002: 権限不足のアクセス拒否

**テスト内容**: 営業担当者が管理者専用機能にアクセス

| 操作                   | 期待結果      |
| ---------------------- | ------------- |
| ユーザーマスタ一覧表示 | 403 Forbidden |
| ユーザー作成           | 403 Forbidden |

#### TC-SEC-003: CSRF対策

**テスト内容**: CSRFトークンなしでPOST/PUT/DELETEリクエスト

| 操作                         | 期待結果      |
| ---------------------------- | ------------- |
| 日報作成（トークンなし）     | 403 Forbidden |
| コメント投稿（トークンなし） | 403 Forbidden |

### 5.2 入力検証

#### TC-SEC-004: SQLインジェクション対策

**テスト内容**: 検索フォームに `'; DROP TABLE users; --` を入力

| 項目         | 期待結果                                 |
| ------------ | ---------------------------------------- |
| 顧客検索     | エラーが発生せず、安全にエスケープされる |
| ユーザー検索 | エラーが発生せず、安全にエスケープされる |

#### TC-SEC-005: XSS対策

**テスト内容**: `<script>alert('XSS')</script>` を入力

| 項目          | 期待結果                                         |
| ------------- | ------------------------------------------------ |
| 日報のProblem | スクリプトが実行されず、テキストとして表示される |
| コメント内容  | スクリプトが実行されず、テキストとして表示される |

#### TC-SEC-006: パストラバーサル対策

**テスト内容**: `../../etc/passwd` のようなパスを含むリクエスト

| 項目                             | 期待結果        |
| -------------------------------- | --------------- |
| ファイルアップロード（将来機能） | 400 Bad Request |

### 5.3 レート制限

#### TC-SEC-007: ログインレート制限

**テスト内容**: 1分間に6回ログインを試行

| 項目                | 期待結果              |
| ------------------- | --------------------- |
| 6回目のログイン試行 | 429 Too Many Requests |

#### TC-SEC-008: APIレート制限

**テスト内容**: 1分間に101回APIリクエストを送信

| 項目                | 期待結果              |
| ------------------- | --------------------- |
| 101回目のリクエスト | 429 Too Many Requests |

---

## 6. パフォーマンステスト

### 6.1 レスポンスタイム

#### TC-PERF-001: ページ読み込み時間

| 画面           | 目標    | 測定方法   |
| -------------- | ------- | ---------- |
| ダッシュボード | 2秒以内 | Lighthouse |
| 日報一覧       | 2秒以内 | Lighthouse |
| 日報詳細       | 2秒以内 | Lighthouse |

#### TC-PERF-002: API レスポンスタイム

| API                 | 目標      | 測定方法 |
| ------------------- | --------- | -------- |
| GET /daily-reports  | 500ms以内 | k6       |
| POST /daily-reports | 1秒以内   | k6       |
| GET /customers      | 500ms以内 | k6       |

### 6.2 負荷テスト

#### TC-PERF-003: 同時接続テスト

**テスト内容**: 100ユーザーが同時にダッシュボードにアクセス

| 項目                 | 目標    |
| -------------------- | ------- |
| 平均レスポンスタイム | 2秒以内 |
| エラー率             | 1%以下  |

#### TC-PERF-004: データ量増加テスト

**テスト内容**: 10,000件の日報が存在する状態で一覧表示

| 項目       | 目標    |
| ---------- | ------- |
| 初期表示   | 3秒以内 |
| ページング | 1秒以内 |

---

## 7. ブラウザ互換性テスト

### 7.1 対象ブラウザ

| ブラウザ | バージョン | 優先度 |
| -------- | ---------- | ------ |
| Chrome   | 最新版     | 高     |
| Firefox  | 最新版     | 高     |
| Safari   | 最新版     | 高     |
| Edge     | 最新版     | 中     |

### 7.2 テスト項目

#### TC-BROWSER-001: 基本機能動作確認

**テスト内容**: 各ブラウザで主要機能（ログイン、日報作成、コメント投稿）が正常に動作することを確認

#### TC-BROWSER-002: レイアウト崩れ確認

**テスト内容**: 各ブラウザで画面レイアウトが正しく表示されることを確認

---

## 8. モバイル対応テスト

### 8.1 対象デバイス

| デバイス  | OS         | ブラウザ |
| --------- | ---------- | -------- |
| iPhone 14 | iOS 17     | Safari   |
| iPhone SE | iOS 17     | Safari   |
| Pixel 7   | Android 14 | Chrome   |

### 8.2 テスト項目

#### TC-MOBILE-001: レスポンシブデザイン

**テスト内容**: 各デバイスで画面が適切に表示されることを確認

#### TC-MOBILE-002: タッチ操作

**テスト内容**: ボタン、リンク、フォームがタッチ操作で正常に動作することを確認

#### TC-MOBILE-003: 入力フォーム

**テスト内容**: モバイルキーボードで入力がスムーズに行えることを確認

---

## 9. 回帰テスト

### 9.1 回帰テスト対象

- 全ての機能テストケース（優先度：高）
- 全てのAPIテストケース
- 主要なセキュリティテストケース

### 9.2 自動化

- E2Eテスト（Playwright）で主要パスを自動化
- APIテスト（Jest）で全エンドポイントを自動化
- CI/CDパイプライン（GitHub Actions）で自動実行

---

## 10. 受け入れ基準

### 10.1 リリース可否判定基準

| 項目                            | 基準     |
| ------------------------------- | -------- |
| 重大バグ（Severity: Critical）  | 0件      |
| 高バグ（Severity: High）        | 0件      |
| 中バグ（Severity: Medium）      | 3件以下  |
| 低バグ（Severity: Low）         | 10件以下 |
| テストカバレッジ（単体）        | 80%以上  |
| テストカバレッジ（E2E主要パス） | 100%     |

### 10.2 パフォーマンス基準

| 項目                 | 基準           |
| -------------------- | -------------- |
| ページ読み込み時間   | 平均2秒以内    |
| API レスポンスタイム | 平均500ms以内  |
| 同時接続100ユーザー  | エラー率1%以下 |

---

## 11. バグ管理

### 11.1 バグ優先度

| 優先度   | 定義                     | 例                                   |
| -------- | ------------------------ | ------------------------------------ |
| Critical | システム停止、データ損失 | ログインできない、データ削除のバグ   |
| High     | 主要機能が使用不可       | 日報作成ができない、検索が動作しない |
| Medium   | 一部機能の不具合         | ソート順が不正、UIの軽微な崩れ       |
| Low      | 軽微な問題               | 誤字脱字、レイアウトの微調整         |

### 11.2 バグライフサイクル

1. New: バグ発見
2. Assigned: 担当者アサイン
3. In Progress: 修正中
4. Fixed: 修正完了
5. Verified: 検証済み
6. Closed: クローズ

---

## 12. テストスケジュール（例）

| フェーズ             | 期間       | 担当             | 内容                            |
| -------------------- | ---------- | ---------------- | ------------------------------- |
| 単体テスト           | 開発中     | 開発者           | 各機能の単体テスト              |
| 結合テスト           | 1週間      | 開発者           | APIとフロントエンドの結合テスト |
| システムテスト       | 1週間      | QA               | 全機能の総合テスト              |
| セキュリティテスト   | 3日        | セキュリティ担当 | 脆弱性診断                      |
| パフォーマンステスト | 3日        | QA               | 負荷テスト・パフォーマンス測定  |
| 受け入れテスト       | 1週間      | ユーザー         | 実際の業務フローでの検証        |
| 回帰テスト           | リリース前 | 自動化           | 全機能の再テスト                |

---

## 13. テストレポート

### 13.1 日次レポート

- 実施したテストケース数
- 発見したバグ数（優先度別）
- テスト進捗率

### 13.2 最終レポート

- 全テストケース実施結果サマリー
- バグ統計（優先度別、機能別）
- カバレッジレポート
- パフォーマンステスト結果
- リリース可否判定

---

## 14. 補足事項

### 14.1 テストデータのクリーンアップ

- テスト実行後は必ずデータベースを初期状態にリセット
- テスト環境専用のデータベースを使用

### 14.2 テストドキュメントの更新

- 機能追加・変更時はテストケースも更新
- バグ修正時は該当するテストケースを追加

### 14.3 継続的改善

- テスト結果を定期的にレビュー
- テスト自動化の範囲を拡大
- テストカバレッジの向上
